<!doctype html>
<html>
  <head>
    <title>Fruit Example</title>
  </head>
  <body>
    <h1>Simplest Fruit Bandit</h1>
    <p>
      This is the simplest example of a bandit that is learning the preference
      among three types of fruit: apple, pear or orange.
    </p>
    <p>
      We are only learning which fruit is preferred from eating or not eating,
      without regards to context and without regards to similarity in features
      between actions.
    </p>
    <p>
      Decide which fruit you like and then only eat that fruit. The bandit will
      learn which fruit you like and will recommend it to you. Then change your
      mind and see how quickly the bandit picks up on your new preference.
    </p>

    <h2>Fruit probabilities:</h2>
    <div id="action-probabilities"></div>

    <h2>Recommended fruit:</h2>
    <div id="recommended-fruit"></div>

    <button id="accept-button">Accept</button>
    <button id="reject-button">Reject</button>

    <p><a href="index.html">Back to index</a></p>

    <script src="../../dist/browser/simpleBandit.js"></script>
    <script>
      let bandit = new SimpleBandit({
        oracles: new SimpleOracle({ learningRate: 0.1 }),
        actions: ["apple", "pear", "orange"],
        temperature: 0.2,
      });
      let recommendation;

      function generateNewRecommendation() {
        recommendation = bandit.recommend();
        document.getElementById("recommended-fruit").innerText =
          recommendation.actionId;
        let scoredActions = bandit.getScoredActions();
        document.getElementById("action-probabilities").innerText =
          scoredActions
            .map(function (scoredAction) {
              return (
                scoredAction.actionId +
                " (" +
                (scoredAction.probability * 100).toFixed(1) +
                "%)"
              );
            })
            .join(", ");
      }

      generateNewRecommendation();

      document
        .getElementById("accept-button")
        .addEventListener("click", async function () {
          await bandit.accept(recommendation);
          generateNewRecommendation();
        });

      document
        .getElementById("reject-button")
        .addEventListener("click", async function () {
          await bandit.reject(recommendation);
          generateNewRecommendation();
        });
    </script>
  </body>
</html>
